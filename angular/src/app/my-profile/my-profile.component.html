<app-navbar></app-navbar>
<div class="container">
    <h1>Min Profil</h1>

    <mat-progress-bar 
    class="example-margin"
    [color]="color"
    [mode]="mode"
    [value]="value">></mat-progress-bar>
    
    <!-- Desktop -->
    <div class="row">
        
        <mat-tab-group class="mat-tab-profile">
            <mat-tab label="Persondata">

                <mat-card>
                    <form [formGroup]="personDataForm">
                    <mat-form-field class="block-field">
                            <input matInput id="name" formControlName="firstName" name="firstName" placeholder="Fornavn" type="text" autofocus>
                    </mat-form-field>

                    <mat-form-field>
                            <input matInput id="lastname" formControlName="lastName" name="lastName" placeholder="Efternavn" type="text">
                    </mat-form-field>

                    <mat-form-field class="block-field">
                            <input id="birthday" [min]="min" [max]="max" formControlName="birthday" matInput [matDatepicker]="picker" placeholder="DD/MM/YYYY">
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>

                    <mat-form-field class="block-field">
                        <mat-select formControlName="gender" placeholder="Køn">
                            <mat-option value="Mand">Mand</mat-option>
                            <mat-option value="Kvinde">Kvinde</mat-option>
                        </mat-select>
                    </mat-form-field>
                    </form>
                    <mat-card-actions>
                            <button mat-raised-button color="primary" (click)="updatePersonData(personDataForm.value); accountProgress()">Opdater</button>
                    </mat-card-actions>
                </mat-card>
            </mat-tab>

            <mat-tab label="Kontakt">

                <mat-card>
                    <form [formGroup]="contactForm">
                        <mat-form-field class="block-field">
                            <mat-label>Mobil/telefon</mat-label>
                            <input matInput matTooltip="8 cifre" formControlName="phone" placeholder="12345678"/>
                        </mat-form-field>

                        <mat-form-field>
                            <mat-label>Adresse</mat-label>
                            <input matInput type="text" formControlName="street" placeholder="Minvej 99">
                        </mat-form-field>

                        <mat-form-field>
                            <mat-label>Postnummer</mat-label>
                            <input (keyup)="lookUpCity($event.target.value)" matInput type="text" formControlName="zip"  id="inputZip" placeholder="1234">
                        </mat-form-field>

                        <mat-form-field>
                            <mat-label>By</mat-label>
                            <input readonly matTooltip="Slåes op automatisk" matInput type="text" formControlName="city" id="inputBy" placeholder="...">
                        </mat-form-field>

                    </form>
                    <mat-card-actions>
                            <button mat-raised-button color="primary" (click)="updateContact(contactForm.value); accountProgress()">Opdater</button>
                    </mat-card-actions>
                </mat-card>  
            </mat-tab>

            <mat-tab label="Familie">
                <mat-card>
                        <form [formGroup]="childrenForm">
                            <mat-form-field class="block-field">
                                <input (keyup)="displayBirthdayInput($event.target.value)" min="0" max="9" pattern="[0-9]" title="Antal børn [0-9]" matInput type="number" formControlName="numberOfChildren" placeholder="Antal børn"/>
                            </mat-form-field>

                            <mat-form-field *ngFor="let child of frontEndModellerChildren; let i = index;" class="block-field">
                                <input formControlName="{{child.formControlName}}" matInput [matDatepicker]="i" placeholder="{{child.view}}" [attr.id]="dtPicker + i">
                                <mat-datepicker-toggle matSuffix [for]="i"></mat-datepicker-toggle>
                                <mat-datepicker #i></mat-datepicker>   
                                       
                            </mat-form-field>

                        </form>

                        <mat-card-actions>
                                <button mat-raised-button color="primary" (click)="updateChildren(childrenForm.value); accountProgress()">Opdater</button>
                        </mat-card-actions>
                        
                </mat-card>
            </mat-tab>

            <mat-tab label="Billeder">
                <mat-card>

                    <div *ngIf="!hasImages" class="ng-hide">
                        <div class="alert alert-warning" role="alert">
                            <div *ngIf="!hasImages" class="ng-hide"></div>
                            <strong>Hov!</strong> Der er ingen billeder oploadet.
                        </div>
                    </div>

                    <mat-card>
                       <user-image-gallery></user-image-gallery> 
                    </mat-card>

                    <mat-card>
                        <image-upload></image-upload>
                    </mat-card>
                
                </mat-card>
            </mat-tab>

            <mat-tab label="Indstillinger">
                <mat-card>

                    <form [formGroup]="settingsForm">
                        
                        
                        <mat-label class="block-field">Nye Arrangementer</mat-label>
                        <mat-slide-toggle matInput formControlName="newsletterEvent"
                            (change)="changedNewsEvent()"
                            class="example-margin"
                            color="primary"
                            [checked]="newEvents">{{newEvents ? trueText : falseText}}</mat-slide-toggle>
                        
                            <mat-label class="block-field">Daglige notifikationer</mat-label>
                            <mat-slide-toggle formControlName="newsletterDaily"
                            (change)="changedNewsDaily()"
                            class="example-margin"
                            color="primary"
                            [checked]="newsDaily">{{newsDaily ? trueText : falseText}}</mat-slide-toggle>

                            <mat-label class="block-field">Ugentlige notifikationer</mat-label>
                            <mat-slide-toggle formControlName="newsletterWeekly"
                            (change)="changedNewsWeekly()"
                            class="example-margin"
                            color="primary"
                            [checked]="newsWeekly">{{newsWeekly ? trueText : falseText}}</mat-slide-toggle>
                        
                            <mat-card-actions>
                                <button mat-raised-button color="primary" (click)="updateSettings(settingsForm.value); accountProgress()">Opdater</button>
                            </mat-card-actions>

                    </form>

                </mat-card>
            </mat-tab>

            <mat-tab label="Deaktivering">

                <mat-card>
                    <h4>Skjul/vis profil</h4>
                    <button (click)="deactivateAccount(!state)" mat-raised-button>{{activationText}}</button>

                    <h4>Slet Profil</h4>
                    <label *ngIf="usernameValidation"> <strong style="color:red">Advarsel:</strong> denne handling er permanent. Al credit, fremgang vil blive slettet og kan ikke gøres om</label>
                    <form>
                        <mat-form-field>
                            <input (keyup)="usernameInput($event.target.value)"  matTooltip="Bemærk at du skal tage højde for store og små bogstaver" matInput placeholder="Indtast brugernavn">
                        </mat-form-field>
                        <button *ngIf="usernameValidation" (click)="deleteAccount()" mat-raised-button color="warn">Slet profil</button>
                    </form>
                    
                </mat-card>
            </mat-tab>

            <mat-tab label="Medlemsskab">
                <mat-card>
                    <mat-list>
                        <mat-list-item>
                                <label>Rating:</label> <strong>{{userRating}} </strong><mat-icon color="primary">star</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <label>Arrangørniveau</label> <strong>{{metalName}} </strong><img [src]="metal">
                        </mat-list-item>
                        <mat-list-item>
                                <label>Antal events som vært:</label><mat-icon [matBadge]="eventsHosted" matBadgeColor="primary">home</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                                <label>Antal events som deltager</label><mat-icon [matBadge]="eventsAttended" matBadgeColor="primary">person_add</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <label>Medlemskab udløber</label> 
                            <mat-chip-list>
                                    <mat-chip selected color="primary"> {{paidUntil | date:'short'}}</mat-chip>
                            </mat-chip-list>
                        </mat-list-item>
                    </mat-list>
                </mat-card>
            </mat-tab>


        </mat-tab-group>
    </div>

</div>